# Fluxion Environment Configuration
# Copy this file to .env and customize the values for your deployment

# =============================================================================
# Security Settings
# =============================================================================

# Database passwords
POSTGRES_PASSWORD=fluxion_secure_password_change_me
REDIS_PASSWORD=redis_secure_password_change_me
INFLUXDB_PASSWORD=influxdb_admin_password_change_me
INFLUXDB_TOKEN=influxdb_admin_token_change_me

# Grafana credentials
GRAFANA_USERNAME=admin
GRAFANA_PASSWORD=grafana_admin_password_change_me

# MQTT credentials
MQTT_USERNAME=fluxion
MQTT_PASSWORD=mqtt_password_change_me

# Node-RED authentication
NODE_RED_USERNAME=admin
NODE_RED_PASSWORD=node_red_password_change_me
NODE_RED_AUTH=true

# =============================================================================
# Client Configuration
# =============================================================================

# Unique identifier for this solar plant
CLIENT_ID=my_solar_plant_001

# API key for server authentication
CLIENT_API_KEY=your_api_key_here

# Inverter connection settings
INVERTER_TYPE=solax
INVERTER_HOST=192.168.1.100
INVERTER_PORT=502
INVERTER_SERIAL=ABC123456789

# =============================================================================
# Feature Flags
# =============================================================================

# Enable TLS/SSL (requires certificates)
ENABLE_TLS=false

# Enable Tor for anonymous communication
ENABLE_TOR=false

# Enable privileged mode for hardware access
ENABLE_PRIVILEGED=false

# =============================================================================
# Logging and Monitoring
# =============================================================================

# Log level: trace, debug, info, warn, error
LOG_LEVEL=info

# =============================================================================
# Advanced Settings
# =============================================================================

# JWT token expiry (hours for access, days for refresh)
JWT_ACCESS_TOKEN_EXPIRY_HOURS=1
JWT_REFRESH_TOKEN_EXPIRY_DAYS=30

# Resource limits
POSTGRES_MAX_CONNECTIONS=100
REDIS_MAX_MEMORY=512mb
INFLUXDB_MAX_SERIES=1000000

# =============================================================================
# Development Settings (only for development/testing)
# =============================================================================

# Enable development mode
DEV_MODE=false

# Enable debug features
DEBUG_MODE=false

# Disable authentication (development only - DANGEROUS!)
DISABLE_AUTH=false

# =============================================================================
# Network Configuration
# =============================================================================

# External port mappings (change these if you have conflicts)
HTTP_PORT=80
HTTPS_PORT=443
GRAFANA_PORT=3000
PROMETHEUS_PORT=9090
CLIENT_HTTP_PORT=8000
CLIENT_NODERED_PORT=1880
MQTT_PORT=1883
MQTT_TLS_PORT=8883

# =============================================================================
# Backup and Data Retention
# =============================================================================

# Database backup settings
POSTGRES_BACKUP_ENABLED=true
POSTGRES_BACKUP_RETENTION_DAYS=30

# Time-series data retention
INFLUXDB_RETENTION_DAYS=365
INFLUXDB_SHARD_GROUP_DURATION=7d

# Log retention
LOG_RETENTION_DAYS=30

# =============================================================================
# Monitoring and Alerting
# =============================================================================

# Prometheus scrape interval
PROMETHEUS_SCRAPE_INTERVAL=15s

# Alert manager configuration
ALERTMANAGER_ENABLED=true
ALERT_EMAIL_TO=admin@yourdomain.com
ALERT_EMAIL_FROM=fluxion@yourdomain.com
SMTP_HOST=smtp.yourdomain.com
SMTP_PORT=587
SMTP_USERNAME=fluxion@yourdomain.com
SMTP_PASSWORD=smtp_password_change_me

# =============================================================================
# Solar Plant Specific Settings
# =============================================================================

# Plant information
PLANT_NAME="My Solar Plant"
PLANT_LOCATION="City, Country"
PLANT_TIMEZONE=UTC
PLANT_CAPACITY_KW=10.0

# Energy pricing (for optimization)
ENERGY_PRICE_PER_KWH=0.12
FEED_IN_TARIFF=0.08

# Battery settings
BATTERY_CAPACITY_KWH=13.5
BATTERY_MIN_SOC=10
BATTERY_MAX_SOC=100

# Grid connection settings
MAX_EXPORT_POWER_KW=5.0
MAX_IMPORT_POWER_KW=20.0

# =============================================================================
# Cloud Integration (Optional)
# =============================================================================

# Enable cloud synchronization
CLOUD_SYNC_ENABLED=false
CLOUD_API_URL=https://api.fluxion.cloud
CLOUD_API_KEY=your_cloud_api_key_here

# =============================================================================
# Home Assistant Integration
# =============================================================================

# Home Assistant connection
HOMEASSISTANT_URL=http://homeassistant.local:8123
HOMEASSISTANT_TOKEN=your_long_lived_access_token

# MQTT Discovery
MQTT_DISCOVERY_PREFIX=homeassistant
MQTT_DISCOVERY_ENABLED=true

# =============================================================================
# Weather Integration
# =============================================================================

# Weather API for solar forecasting
WEATHER_API_KEY=your_weather_api_key
WEATHER_LOCATION=your_city_or_coordinates
WEATHER_UPDATE_INTERVAL=300

# =============================================================================
# VPP (Virtual Power Plant) Settings
# =============================================================================

# VPP participation
VPP_ENABLED=false
VPP_PROVIDER=your_vpp_provider
VPP_API_KEY=your_vpp_api_key

# Grid services
FREQUENCY_RESPONSE_ENABLED=false
DEMAND_RESPONSE_ENABLED=false

# =============================================================================
# Maintenance and Updates
# =============================================================================

# Automatic updates
AUTO_UPDATE_ENABLED=false
UPDATE_CHANNEL=stable  # stable, beta, nightly

# Maintenance windows (UTC time)
MAINTENANCE_WINDOW_START=02:00
MAINTENANCE_WINDOW_END=04:00

# Health check settings
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3